import{u as j,r as t,a,j as s}from"./index-DoLby0QM.js";function g(){const{user:i,login:r}=j(),[d,h]=t.useState([]),[u,c]=t.useState(!1),[l,o]=t.useState(null);t.useEffect(()=>{m()},[]);async function m(){c(!0);try{const e=await a.get("/api/schools");h(e.schools||[])}catch(e){o(e.message||"Failed to fetch schools")}finally{c(!1)}}async function p(e){o(null);try{const n=await a.post(`/api/schools/${e}/join`);r(n),o("Successfully joined school!")}catch(n){o(n.message||"Failed to join school.")}}const f=i.schools.map(e=>e.schoolId);return s.jsxs("div",{className:"card",children:[s.jsx("h2",{children:"Join a School"}),s.jsx("p",{children:"Select a school from the list below to become a member."}),u&&s.jsx("p",{children:"Loading schools..."}),l&&s.jsx("div",{style:{color:l.includes("Successfully")?"green":"red",marginBottom:"1rem"},children:l}),s.jsx("ul",{style:{listStyle:"none",padding:0},children:d.map(e=>s.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #eee"},children:[s.jsx("span",{children:e.name}),f.includes(e._id)?s.jsx("button",{disabled:!0,children:"Already a member"}):s.jsx("button",{onClick:()=>p(e._id),children:"Join"})]},e._id))})]})}export{g as default};
