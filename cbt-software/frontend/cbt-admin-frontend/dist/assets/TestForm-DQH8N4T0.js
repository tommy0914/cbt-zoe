import{r as i,j as e,a as D}from"./index-B2ZUuq83.js";function N({token:g,test:a,onTestCreated:f,onTestUpdated:C}){const[h,u]=i.useState(""),[x,c]=i.useState(60),[y,d]=i.useState(50),[b,p]=i.useState(""),[m,v]=i.useState(""),[r,o]=i.useState([{subject:"",count:10}]),[j,l]=i.useState(null);i.useEffect(()=>{a&&(u(a.testName),c(a.durationMinutes),d(a.passScorePercentage),p(a.availableFrom?new Date(a.availableFrom).toISOString().slice(0,16):""),v(a.availableUntil?new Date(a.availableUntil).toISOString().slice(0,16):""),o(a.questionDistribution))},[a]);const S=(t,n,s)=>{const T=[...r];T[t][n]=s,o(T)},w=()=>{o([...r,{subject:"",count:10}])},F=t=>{const n=[...r];n.splice(t,1),o(n)},U=async t=>{t.preventDefault(),l(null);const n={testName:h,durationMinutes:x,passScorePercentage:y,availableFrom:b?new Date(b):null,availableUntil:m?new Date(m):null,questionDistribution:r};try{if(a){const s=await D.put(`/api/tests/${a._id}`,n,g);s.test?(l("Test updated successfully!"),C(s.test)):l(s.message||"Failed to update test.")}else{const s=await D.post("/api/tests",n,g);s.test?(l("Test created successfully!"),f(s.test),u(""),c(60),d(50),p(""),v(""),o([{subject:"",count:10}])):l(s.message||"Failed to create test.")}}catch(s){l(s.message||"An error occurred.")}};return e.jsxs("div",{className:"card",style:{marginTop:20},children:[e.jsx("h4",{children:a?"Edit Test":"Create New Test"}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Test Name"}),e.jsx("input",{value:h,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:x,onChange:t=>c(t.target.value)})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Pass Score (%)"}),e.jsx("input",{type:"number",value:y,onChange:t=>d(t.target.value)})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Available From"}),e.jsx("input",{type:"datetime-local",value:b,onChange:t=>p(t.target.value)})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Available Until"}),e.jsx("input",{type:"datetime-local",value:m,onChange:t=>v(t.target.value)})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Question Distribution"}),r.map((t,n)=>e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[e.jsx("input",{value:t.subject,onChange:s=>S(n,"subject",s.target.value),placeholder:"Subject"}),e.jsx("input",{type:"number",value:t.count,onChange:s=>S(n,"count",s.target.value),placeholder:"Count"}),e.jsx("button",{type:"button",onClick:()=>F(n),children:"Remove"})]},n)),e.jsx("button",{type:"button",onClick:w,children:"Add Subject"})]}),e.jsx("div",{style:{marginTop:12},children:e.jsx("button",{type:"submit",children:a?"Update Test":"Create Test"})}),j&&e.jsx("div",{style:{marginTop:8,color:j.includes("success")?"green":"red"},children:j})]})]})}export{N as default};
